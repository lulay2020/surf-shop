<% layout('layouts/boilerplate')-%>
<h1>Posts</h1>
<% include ../partials/paginatePosts %>
<div id="map"></div>
<div>
<% posts.docs.forEach(post =>{ %>
	<div>
		<h2><%= post.title %></h2>
		<div><%= post.price %></div>
		<div><%= post.description %></div>
		<div><%= post.location %></div>
		<div><a href="/posts/<%=post.id%>">Show more</a></div>
	</div>
<% }); %>
	
</div>
<% include ../partials/paginatePosts %>

<script>
	mapboxgl.accessToken = "<%= mapBoxToken %>";
	var posts = {features: <%- JSON.stringify(posts.docs) %>};
</script>
<script type="text/javascript" src="/scripts/allPostsClusterMap.js"></script>
